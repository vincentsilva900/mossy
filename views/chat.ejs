<%- include('partials/logoutToolbar') %>

<!-- üîô Back to Your Own Profile -->
    <div style="margin: 1rem 0;">
      <a href="/user/profile">
        <button style="background-color: #D0CA84; border: none; padding: 0.5rem 1rem; border-radius: 10px; font-weight: bold; cursor: pointer;">
          ‚¨ÖÔ∏è Back to My Profile
        </button>
      </a>
    </div>
    <style>
        body {
          background-image: url('/images/your-mossy-background.jpg');
          background-size: cover;
          background-attachment: fixed;
          background-position: center;
          font-family: 'Quicksand', sans-serif;
          color: #2b560f;
        }
      </style>
      
<h2 style="text-align:center;">Chat with <%= friend.username %></h2>

<div style="max-width:600px; margin:auto;">
  <% messages.forEach(msg => { %>
    <div style="text-align:<%= msg.sender._id.equals(session.userId) ? 'right' : 'left' %>; margin: 1rem 0;">
        <p style="background:#e6ffe6; color:#437c1c; padding:0.8rem 1.2rem; border-radius:1.2rem; display:inline-block; max-width:70%;">
            <%= msg.content %><br>
            <small style="font-size: 0.8rem; color:#3d753d;"><%= new Date(msg.createdAt).toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }) %></small>
          </p>
          
    </div>
  <% }) %>

  <form action="/messages/<%= friend._id %>" method="POST" style="text-align:center; margin-top:2rem;">
    <textarea name="content" rows="3" style="width:90%; border-radius: 1rem; padding:0.5rem;" placeholder="Type a message..." required></textarea><br>
    <button type="submit" style="margin-top:0.5rem;">üì© Send</button>
  </form>
</div>

<%- include('partials/logoutToolbar') %>

<!-- üîô Back to Your Own Profile -->
    <div style="margin: 1rem 0;">
      <a href="/user/profile">
        <button style="background-color: #D0CA84; border: none; padding: 0.5rem 1rem; border-radius: 10px; font-weight: bold; cursor: pointer;">
          ‚¨ÖÔ∏è Back to My Profile
        </button>
      </a>
    </div>
  
<h2 style="text-align: center; color: #b5ead7;">üì¨ Your Conversations</h2>
<div style="max-width: 600px; margin: auto;">
  <% conversations.forEach(conv => { %>
    <div style="background: #f0fff4; padding: 1rem; margin-bottom: 1rem; border-radius: 1rem;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <!-- Friend info + latest message -->
        <div>
          <strong style="color: #2f4858;"><%= conv.friend.username %></strong><br>
          <% if (conv.latestMessage) { %>
            <span style="color: #555;"><%= conv.latestMessage.content %></span>
          <% } else { %>
            <span style="color: #aaa;">No messages yet</span>
          <% } %>
        </div>
  
        <!-- Buttons -->
        <div style="display: flex; gap: 0.5rem; align-items: center;">
          <!-- Start Mossage -->
          <form action="/messages/<%= conv.friend._id %>" method="GET">
            <button style="background-color: #a3d9a5; border: none; border-radius: 8px; padding: 0.5rem; cursor: pointer;">
              üì© Start Mossage
            </button>
          </form>
  
          <!-- Delete Conversation -->
          <% if (conv.latestMessage) { %>
            <form action="/messages/delete-conversation/<%= conv.friend._id %>" method="POST">
              <button type="submit" style="background-color: #ffaaaa; border: none; border-radius: 8px; padding: 0.5rem; cursor: pointer;">
                ‚ùå Delete
              </button>
            </form>
          <% } %>
        </div>
      </div>
    </div>
  <% }) %>
  
  
  
</div>

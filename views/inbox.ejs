<%- include('partials/logoutToolbar') %>

<!-- 🔙 Back to Your Own Profile -->
    <div style="margin: 1rem 0;">
      <a href="/user/profile">
        <button style="background-color: #D0CA84; border: none; padding: 0.5rem 1rem; border-radius: 10px; font-weight: bold; cursor: pointer;">
          ⬅️ Back to My Profile
        </button>
      </a>
    </div>
  
<h2 style="text-align: center; color: #b5ead7;">📬 Your Conversations</h2>
<div style="max-width: 600px; margin: auto;">
  <% conversations.forEach(conv => { %>
    <div style="background: #f0fff4; padding: 1rem; margin-bottom: 1rem; border-radius: 1rem; position: relative;">
      <div style="display: flex; justify-content: space-between; align-items: center;">
        <div>
          <strong style="color: #2f4858;"><%= conv.friend.username %></strong><br>
          <% if (conv.latestMessage) { %>
            <span style="color: #555;"><%= conv.latestMessage.content %></span>
          <% } else { %>
            <span style="color: #aaa;">No messages yet</span>
          <% } %>
        </div>
        <form action="/messages/<%= conv.friend._id %>" method="GET">
          <button style="background-color: #a3d9a5; border: none; border-radius: 8px; padding: 0.5rem; cursor: pointer;">
            📩 Start Mossage
          </button>
        </form>
      </div>
  
      <% if (conv.latestMessage) { %>
        <!-- 🗑 Delete Button -->
        <form action="/messages/delete-conversation/<%= conv.friend._id %>" method="POST" style="position: absolute; top: 1rem; right: 1rem;">
          <button type="submit" style="background-color: #ffaaaa; border: none; border-radius: 8px; padding: 0.25rem 0.5rem; font-size: 0.8rem; cursor: pointer;">
            ❌ Delete
          </button>
        </form>
      <% } %>
    </div>
  <% }) %>
  
  
</div>
